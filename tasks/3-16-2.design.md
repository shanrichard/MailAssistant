# Design 3-16-2 - 恢复前端 WebSocket 连接和状态管理

## Requirements

### 核心需求
恢复前端 WebSocket 连接功能，重新激活 `chatStore.ts` 中被禁用的方法。

### 具体要求
1. **恢复 WebSocket 连接** - 重新激活 `connectWebSocket()` 方法
2. **恢复消息发送** - 重新激活 `sendMessage()` 方法
3. **实现自动重连** - 连接断开时自动重试
4. **状态管理** - 正确显示连接状态和重试状态

## Solution

### 实现方案
1. 恢复 `chatStore.ts` 中的 WebSocket 连接逻辑
2. 实现 Socket.IO 事件监听和处理
3. 添加指数退避重连策略
4. 修复连接状态显示逻辑

### 技术细节
- 使用 `socket.io-client` 建立连接
- 实现事件驱动的状态更新
- 连接失败时的错误处理
- 重连过程的用户提示

## Tests

### 功能测试
1. WebSocket 连接建立测试
2. 连接状态正确显示测试
3. 自动重连机制测试
4. 错误处理测试

### 用户界面测试
1. 连接状态指示器测试
2. 重试提示显示测试
3. 用户交互禁用/启用测试