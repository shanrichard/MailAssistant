# Design 2-12-13 - Chat页面功能测试

## Requirements

对 Chat 页面的所有功能进行全面测试，确保用户体验流畅，功能正常。

## Solution

### 手动测试清单

#### 1. 基础对话功能
- [ ] 发送简单问候消息，验证 Agent 响应
- [ ] 发送多轮对话，验证上下文保持
- [ ] 发送长消息，验证显示效果
- [ ] 快速连续发送多条消息

#### 2. 工具调用功能
- [ ] 测试"搜索邮件"功能
  - 示例："帮我搜索最近一周的重要邮件"
- [ ] 测试"读取日报"功能
  - 示例："显示今天的邮件日报"
- [ ] 测试"批量标记已读"功能
  - 示例："把所有促销邮件标记为已读"
- [ ] 测试"更新偏好设置"功能
  - 示例："把newsletter类邮件设为低优先级"
- [ ] 测试"触发邮件处理"功能
  - 示例："立即分析我的新邮件"
- [ ] 测试"查询任务状态"功能
  - 示例："检查邮件处理任务的状态"

#### 3. 实时交互体验
- [ ] 验证流式响应显示（消息逐步出现）
- [ ] 验证工具调用时的状态展示
- [ ] 验证工具调用卡片的展开/折叠
- [ ] 验证加载状态指示器

#### 4. 错误处理
- [ ] 断网后发送消息
- [ ] 发送超长消息（测试限制）
- [ ] 工具调用失败的错误展示
- [ ] WebSocket 断线重连

#### 5. 用户体验
- [ ] 自动滚动到最新消息
- [ ] 时间戳显示正确
- [ ] 输入框 Enter 键发送
- [ ] 发送按钮禁用/启用状态
- [ ] 响应式布局（调整窗口大小）

### 测试环境准备

1. **登录状态**
   - 确保已通过 Google OAuth 登录
   - 检查 localStorage 中有 access_token

2. **后端服务**
   - 确保后端运行在 http://localhost:8000
   - 确保 WebSocket 连接正常

3. **测试数据**
   - 确保数据库中有一些测试邮件
   - 确保有用户偏好设置

### 测试步骤

1. 访问 http://localhost:3000
2. 登录系统
3. 进入 Chat 页面
4. 按照测试清单逐项测试
5. 记录发现的问题

### 预期结果

- 所有基础功能正常工作
- 工具调用可视化清晰
- 错误处理友好
- 用户体验流畅

## Tests

本任务主要通过手动测试完成，不需要编写自动化测试代码。