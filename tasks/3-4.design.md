# Design 3-4 - 开发调试日志系统

## Requirements

构建一个基于 localStorage 的轻量级日志系统，专门用于开发阶段调试，让 Claude 能够通过 API 查看前后端的错误日志。

### 核心需求

1. **前端错误收集到 localStorage**
   - 捕获 console.error 调用
   - 捕获未处理的 Promise rejection
   - 错误信息存储在 localStorage 中
   - 循环存储最近 100 条错误

2. **后端日志查看**
   - 读取现有的后端日志文件
   - 提供 API 接口查看最近的错误

3. **统一查看接口**
   - 一个 API 端点同时返回前后端错误
   - 按时间排序
   - 只在开发环境启用

## Solution

采用最简单的实现方案：

1. **3-4-1 实现前端错误收集器** - localStorage 存储方案
2. **3-4-2 创建日志查看 API** - 读取前后端日志
3. **3-4-3 集成到现有系统** - 最小化改动

## Tests

- [x] 前端错误正确存储到 localStorage
- [x] API 能读取前后端日志
- [x] 不影响生产环境
- [x] 错误信息格式统一